<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Mixin: scheduleMgr</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Mixin: scheduleMgr</h1>
    
    



<section>
    
<header>
    <h2>
    scheduleMgr
    </h2>
    
</header>  

<article>
    <div class="container-overview">
    
    
    
        
            <div class="description">The manager who handles the scheduling of playing UGC on DOOHs</div>
        
        
        
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="schedule_mgr.js.html">schedule_mgr.js</a>, <a href="schedule_mgr.js.html#line15">line 15</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

        
        
    
    </div>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
        <h3 class="subsection-title">Methods</h3>
        
        <dl>
            
<dt>
    <h4 class="name" id="createProgramList"><span class="type-signature">&lt;static> </span>createProgramList<span class="signature">(dooh, intervalOfSelectingUGC, intervalOfPlanningDoohProgrames, programSequence, created_cb)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Automatically selects applied UGC items (based on a predefined rule) and put themin "to-be-played" list for a specific DOOH.<br><br>This method will first ask ScalaMgr about the available time intervals in which Miix systemcan play its UGC content.  It will then generate time slots base on a specific rule, and then fill them by pickeing up UGC items from a sorted list generated from censerMgr.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>dooh</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The ID (the hex string representation of its ObjectID in MongoDB) of the DOOH upon which the selected UGCs are played</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>intervalOfSelectingUGC</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>
            
            
            
            
            
            <td class="description last">An object specifying the starting and ending of      of the time interval for scheduleMgr to select the applied UGC items <br>    <ul>    <li>start: the start of the interval (with the number of milliseconds since midnight Jan 1, 1970)    <li>end: the end of the interval (with the number of milliseconds since midnight Jan 1, 1970)    </ul>    For example, {start: 1371861000000, end: 1371862000000}</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>intervalOfPlanningDoohProgrames</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>
            
            
            
            
            
            <td class="description last">An object specifying the starting and ending of      of the time interval which the generated schedule covers       <ul>    <li>start: the start of the interval (with the number of milliseconds since midnight Jan 1, 1970)    <li>end: the end of the interval (with the number of milliseconds since midnight Jan 1, 1970)    </ul>    For example, {start: 1371861000000, end: 1371862000000}</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>programSequence</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>
            
            
            
            
            
            <td class="description last">An array of strings showing the sequence of program genres to use when     when the system is planning the program(s) of a "micro time interval" <br>    Note: the string must be "miix", "cultural_and_creative", "mood", or "check_in"    For example, ["miix", "check_in", "check_in", "mood", "cultural_and_creative" ] <br></td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>created_cb</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Function</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The callback function called when the result program list is created.<br>    The function signature is created_cb(err, numberOfProgramTimeSlots):    <ul>    <li>err: error message if any error happens    <li>numberOfProgramTimeSlots: number of UGC program time slots generated    </ul></td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="schedule_mgr.js.html">schedule_mgr.js</a>, <a href="schedule_mgr.js.html#line118">line 118</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="getProgramList"><span class="type-signature">&lt;static> </span>getProgramList<span class="signature">(dooh, interval, pageLimit, pageSkip, got_cb)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Get(a.k.a query) the programs (of a specific DOOH) of a specific interval.<br><br>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>dooh</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The ID (the hex string representation of its ObjectID in MongoDB) of the DOOH where the program is to be updated</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>interval</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>
            
            
            
            
            
            <td class="description last">An object specifying the starting and ending of of the time interval to query     <ul>    <li>start: the start of the interval (with the number of milliseconds since midnight Jan 1, 1970)    <li>end: the end of the interval (with the number of milliseconds since midnight Jan 1, 1970)    </ul>    For example, {start: 1371861000000, end: 1371862000000}</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>pageLimit</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The number of program time slot items to return (in got_cb's result).  If null, it returns all items.</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>pageSkip</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The number of program time slot items to skip when returning in in got_cb's result. If null, there is no skip.</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>got_cb</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Function</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The callback function called when the query is don.<br>    The function signature is got_cb(err, resultProgramList):    <ul>    <li>err: error message if any error happens    <li>resultProgramList: An array of objects containing program info:        <ul>        <li>_id: A string (i.e. a hex string representation of its ObjectID in MongoDB) specifying the ID of a program time slot item          <li>timeSlot: An object specifying the starting and ending time of program's time slot            <ul>            <li>start: the start of the interval (with the number of milliseconds since midnight Jan 1, 1970)            <li>end: the end of the interval (with the number of milliseconds since midnight Jan 1, 1970)            </ul>        <li>ugc: A number specifying the ID of the UGC contained in this program. (This is            actually the id of items store in UGC collection.)         </ul>        For example, <br>        [{_id:43524, timeSlot:{start:1371861000000, end :1371862000000}, ugc:48593},<br>         {_id:43525, timeSlot:{start:1371881000000, end:1371882000000}, ugc:48353},<br>         {_id:43544, timeSlot:{start:1371897000000, end:1371898000000}, ugc:43593}]            </ul></td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="schedule_mgr.js.html">schedule_mgr.js</a>, <a href="schedule_mgr.js.html#line520">line 520</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="removeUgcfromProgramAndAutoSetNewOne"><span class="type-signature">&lt;static> </span>removeUgcfromProgramAndAutoSetNewOne<span class="signature">(dooh, programTimeSlot, removed_cb)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Remove the UGC from a specific progrm (of a specific DOOH) and automatically set a new UGC back to this program time slot <br><br>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>dooh</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The ID (the hex string representation of its ObjectID in MongoDB) of the DOOH where the program is to be updated</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>programTimeSlot</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The ID of the program time slot item</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>removed_cb</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Function</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The callback function called when the specific .<br>    The function signature is removed_cb(err) where err is the error message indicating failure:     if successful, err returns null; if failed, err returns the error message.</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="schedule_mgr.js.html">schedule_mgr.js</a>, <a href="schedule_mgr.js.html#line611">line 611</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="setUgcToProgram"><span class="type-signature">&lt;static> </span>setUgcToProgram<span class="signature">(dooh, programTimeSlot, ugcNo, set_cb)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Set an UGC of specific No to be played in a specific program time slot (of a specific DOOH <br><br>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>dooh</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The ID (the hex string representation of its ObjectID in MongoDB) of the DOOH where the program is to be updated</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>programTimeSlot</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The ID of the program time slot item</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>ugcNo</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The reference No the UGC item to put in the specified program time slot</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>set_cb</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Function</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The callback function called when the specified program is set.<br>    The function signature is updated_cb(err) where err is the error message indicating failure:     if successful, err returns null; if failed, err returns the error message.</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="schedule_mgr.js.html">schedule_mgr.js</a>, <a href="schedule_mgr.js.html#line594">line 594</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="updateProgramList"><span class="type-signature">&lt;static> </span>updateProgramList<span class="signature">(dooh, intervalToUpdate, updated_cb)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Update the programs (of a specific DOOH) of a specific interval.<br><br>This method will ask ScalaMgr about the latest available time intervals (in which Miix systemcan play its UGC content) and then re-schedule the programs accordingly.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>dooh</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The ID (the hex string representation of its ObjectID in MongoDB) of the DOOH whose programs are to be updated</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>intervalToUpdate</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>
            
            
            
            
            
            <td class="description last">An object specifying the starting and ending of      of the time interval in which the scheduled programs will be updated       <ul>    <li>start: the start of the interval (with the number of milliseconds since midnight Jan 1, 1970)    <li>end: the end of the interval (with the number of milliseconds since midnight Jan 1, 1970)    </ul>    For example, {start: 1371861000000, end: 1371862000000}</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>updated_cb</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Function</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The callback function called when the program list is updated.<br>    The function signature is updated_cb(err, listOfProgramsOutOfSchedule) :    <ul>    <li>listOfProgramsOutOfSchedule: An array of objects containing program info:        <ul>        <li>programTimeSlot: A string specifying the ID (the hex string representation of its ObjectID in MongoDB) of the program item which is removed from the schedule             after updating         <li>ugc: A string specifying the ID (the hex string representation of its ObjectID in MongoDB) of the UGC contained in this removed program. (This is            actually the id of items store in ugc collection.)         </ul>        For example, <br>        [{programTimeSlot:43524, ugc:48593},<br>         {programTimeSlot:43525, ugc:48353},<br>         {programTimeSlot:43544, ugc:43593}]            <li>err: error message if any error happens    </ul></td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="schedule_mgr.js.html">schedule_mgr.js</a>, <a href="schedule_mgr.js.html#line574">line 574</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        </dl>
    
    
    
    
    
</article>

</section>  




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Mixins</h3><ul><li><a href="scalaMgr.html">scalaMgr</a></li><li><a href="scheduleMgr.html">scheduleMgr</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Mon Jul 08 2013 19:11:59 GMT+0800 (TST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>